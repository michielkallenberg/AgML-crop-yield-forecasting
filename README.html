

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgML - Machine Learning for Agricultural Modeling &mdash; AgML-crop-yield-forecasting  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            AgML-crop-yield-forecasting
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">AgML - Machine Learning for Agricultural Modeling</a><ul>
<li><a class="reference internal" href="#agml-crop-yield-forecasting">AgML Crop Yield Forecasting</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of contents</a></li>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#coverage-for-maize">Coverage for maize</a></li>
<li><a class="reference internal" href="#coverage-for-wheat">Coverage for wheat</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getting-started">Getting started</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#downloading-dataset">Downloading dataset</a></li>
<li><a class="reference internal" href="#running-the-benchmark">Running the benchmark</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dataset">Dataset</a><ul>
<li><a class="reference internal" href="#data-sources">Data sources</a></li>
</ul>
</li>
<li><a class="reference internal" href="#leaderboard">Leaderboard</a></li>
<li><a class="reference internal" href="#how-to-cite">How to cite</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-contribute">How to contribute</a></li>
<li><a class="reference internal" href="#additional-information">Additional information</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AgML-crop-yield-forecasting</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">AgML - Machine Learning for Agricultural Modeling</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="agml-machine-learning-for-agricultural-modeling">
<h1>AgML - Machine Learning for Agricultural Modeling<a class="headerlink" href="#agml-machine-learning-for-agricultural-modeling" title="Link to this heading"></a></h1>
<p>AgML is the <a class="reference external" href="https://agmip.org/">AgMIP</a> transdisciplinary community of agricultural and machine learning modelers.</p>
<p>AgML aspires to</p>
<ul class="simple">
<li><p>identify key research gaps and opportunities at the intersection of agricultural modelling and machine learning research,</p></li>
<li><p>support enhanced collaboration and engagement between experts in these disciplines, and</p></li>
<li><p>conduct and publish protocol-based studies to establish best practices for robust machine learning use in agricultural modelling.</p></li>
</ul>
<section id="agml-crop-yield-forecasting">
<h2>AgML Crop Yield Forecasting<a class="headerlink" href="#agml-crop-yield-forecasting" title="Link to this heading"></a></h2>
<p>The objective of AgML Crop Yield Forecasting task is to create a benchmark to compare models for crop yield forecasting across countries and crops. The models and forecasts can be used for food security planning or famine early warning. The benchmark is called CY-Bench (crop yield benchmark).</p>
<section id="table-of-contents">
<h3>Table of contents<a class="headerlink" href="#table-of-contents" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="#overview">Overview</a></p></li>
<li><p><a class="reference external" href="#getting-started">Getting started</a></p></li>
<li><p><a class="reference external" href="#dataset">Dataset</a></p></li>
<li><p><a class="reference external" href="#leaderboard">Leaderboard</a></p></li>
</ul>
</section>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h3>
<p>Early in-season predictions of crop yields can inform decisions at multiple levels of the food value chain from late-season agricultural management such as fertilization, harvest, and storage to import or export of produce. Anticipating crop yields is also important to ensure market transparency at the global level (e.g. <a class="reference external" href="https://www.amis-outlook.org/">Agriculture Market Information System</a>, <a class="reference external" href="https://www.cropmonitor.org/">GEOGLAM Crop Monitor</a>) and to plan response actions in food insecure countries at risk of food production shortfalls.</p>
<p>We propose CY-Bench, a dataset and benchmark for subnational crop yield forecasting, with coverage of major crop growing countries of the world for maize and wheat. By subnational, we mean the administrative level where yield statistics are published. When statistics are available for multiple levels, we pick the highest resolution. By yield, we mean end-of-season yield statistics as published by national statistics offices or similar entities representing a group of countries. By forecasting, we mean prediction is made ahead of harvest. The task is also called in-season crop yield forecasting. In-season forecasting is done at a number of time points during the growing season from mid-season to before harvest. The first forecast is made in the middle of the season, i.e. (end of season - start of the season)/2, between mid-season and harvest and 2 weeks before harvest. These time points depend on the crop calendar for the selected crop and country (or region). Since yield statistics may not be available for the current season, we evaluate models using predictors and yield statistics for all available years. The models and forecasts can be used for food security planning or famine early warning. We compare models, algorithms and architectures by keeping other parts of the workflow as similar as possible. For example: the dataset includes same source for each type of predictor (e.g. weather variables, soil moisture, evapotranspiration, remote sensing biomass indicators, soil properties), and selected data are preprocessed using the same pipeline (use the crop mask, crop calendar; use the same boundary files and approach for spatial aggregation) and (for algorithms that require feature design) and same feature design protocol.</p>
<section id="coverage-for-maize">
<h4>Coverage for maize<a class="headerlink" href="#coverage-for-maize" title="Link to this heading"></a></h4>
<p>Undifferentiated Maize or Grain Maize where differentiated <img alt="Maize Coverage Map" src="https://raw.githubusercontent.com/BigDataWUR/AgML-crop-yield-forecasting/main/doc/images/maize_coverage_map.png" /></p>
</section>
<section id="coverage-for-wheat">
<h4>Coverage for wheat<a class="headerlink" href="#coverage-for-wheat" title="Link to this heading"></a></h4>
<p>Undifferentiated Wheat or Winter Wheat where differentiated <img alt="Wheat Coverage Map" src="https://raw.githubusercontent.com/BigDataWUR/AgML-crop-yield-forecasting/main/doc/images/wheat_coverage_map.png" /></p>
</section>
</section>
<section id="getting-started">
<h3>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">cybench</span></code> is an open source python library to load CY-Bench dataset and run the CY-Bench tasks.</p>
<section id="installation">
<h4>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">BigDataWUR</span><span class="o">/</span><span class="n">AgML</span><span class="o">-</span><span class="n">crop</span><span class="o">-</span><span class="k">yield</span><span class="o">-</span><span class="n">forecasting</span>
</pre></div>
</div>
</section>
<section id="requirements">
<h4>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h4>
<p>The benchmark results were produced in the following test environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Operating</span> <span class="n">system</span><span class="p">:</span>
<span class="n">CPU</span><span class="p">:</span>
<span class="n">memory</span> <span class="p">(</span><span class="n">RAM</span><span class="p">):</span>
<span class="n">disk</span> <span class="n">storage</span><span class="p">:</span>
<span class="n">GPU</span><span class="p">:</span>
</pre></div>
</div>
<p><strong>Software requirements</strong>: Python 3.10, scikit-learn 1.3.2, PyTorch 2.1.1+cpu.</p>
</section>
<section id="downloading-dataset">
<h4>Downloading dataset<a class="headerlink" href="#downloading-dataset" title="Link to this heading"></a></h4>
<p>Get the dataset from Zenodo.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">zenodo_get</span>
<span class="n">zenodo_get</span> <span class="o">-</span><span class="n">r</span> <span class="o">&lt;</span><span class="n">record_number</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="running-the-benchmark">
<h4>Running the benchmark<a class="headerlink" href="#running-the-benchmark" title="Link to this heading"></a></h4>
<p>First write a model class <code class="docutils literal notranslate"><span class="pre">your_model</span></code> that extends the <code class="docutils literal notranslate"><span class="pre">BaseModel</span></code> class. The base model class definition is inside <code class="docutils literal notranslate"><span class="pre">models.model</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cybench.models.model</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span> <span class="nn">cybench.benchmark</span> <span class="kn">import</span> <span class="n">run_cybench</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">my_model</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">()</span>
<span class="n">dataset_name</span> <span class="o">=</span> <span class="s2">&quot;maize_us&quot;</span>
<span class="n">run_cybench</span><span class="p">(</span><span class="n">my_model</span><span class="p">,</span> <span class="n">dataset_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="dataset">
<h3>Dataset<a class="headerlink" href="#dataset" title="Link to this heading"></a></h3>
<p>Dataset can be loaded by crop and (optionally by country).</p>
<p>For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;maize&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will load data for countries covered by the maize dataset. Maize data for the US can be loaded as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;maize_us&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="data-sources">
<h4>Data sources<a class="headerlink" href="#data-sources" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Crop Statistics</p></th>
<th class="head"><p>Shapefiles or administrative boundaries</p></th>
<th class="head"><p>Predictors, crop masks, crop calendars</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_FEWSNET/README.md">Africa from FEWSNET</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_FEWSNET/README.md">Africa from FEWSNET</a></p></td>
<td><p>Weather: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_AgERA5/README.md">AgERA5</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_ML/README.md">Mali</a>1</p></td>
<td><p>Use Africa shapefiles from FEWSNET</p></td>
<td><p>Soil: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_soil_WISE/README.md">WISE soil data</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_AR/README.md">Argentina</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_AR/README.md">Argentina</a></p></td>
<td><p>Soil moisture: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_soil_moisture_GLDAS/README.md">GLDAS</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_AU/README.md">Australia</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_AU/README.md">Australia</a></p></td>
<td><p>Evapotranspiration: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_ETo_FAO/README.md">FAO</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_BR/README.md">Brazil</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_BR/README.md">Brazil</a></p></td>
<td><p>FAPAR: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_fpar_500m/README.md">JRC FAPAR</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_CN/README.md">China</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_CN/README.md">China</a></p></td>
<td><p>Crop calendars: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_crop_calendars_ESA_WC/README.md">ESA WorldCereal</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_EU/README.md">EU</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_EU/README.md">EU</a></p></td>
<td><p>NDVI: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_MOD09CMG/README.md">MOD09CMG</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_DE/README.md">Germany</a>2</p></td>
<td><p>Use EU shapefiles</p></td>
<td><p>Crop Masks: <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/global_crop_AFIs_ESA_WC/README.md">ESA WorldCereal</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_IN/README.md">India</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_IN/README.md">India</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_MX/README.md">Mexico</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_MX/README.md">Mexico</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/crop_statistics_US/README.md">US</a></p></td>
<td><p><a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/data_preparation/shapefiles_US/README.md">US</a></p></td>
<td></td>
</tr>
</tbody>
</table>
<p>1: Mali data at admin level 3. Mali data is also included in the FEWSNET Africa dataset, but there it is at admin level 1. 2: Germany data at admin level 3. Germany data is also included in the EU dataset, but there it is at admin level 1.</p>
</section>
</section>
<section id="leaderboard">
<h3>Leaderboard<a class="headerlink" href="#leaderboard" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Model Name</p></th>
<th class="head"><p>NRMSE</p></th>
<th class="head"><p>MAPE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AverageYieldModel</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Linear TrendModel</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Ridge (sklearn)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TorchLSTMModel</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="how-to-cite">
<h3>How to cite<a class="headerlink" href="#how-to-cite" title="Link to this heading"></a></h3>
<p>Please cite CY-bench as follows: TODO.</p>
</section>
</section>
<section id="how-to-contribute">
<h2>How to contribute<a class="headerlink" href="#how-to-contribute" title="Link to this heading"></a></h2>
<p>Thank you for your interest in contributing to AgML Crop Yield Forecasting. Please check <a class="reference external" href="https://github.com/BigDataWUR/AgML-crop-yield-forecasting/tree/main/CONTRIBUTING.md">contributing guidelines</a> for how to get involved and contribute.</p>
</section>
<section id="additional-information">
<h2>Additional information<a class="headerlink" href="#additional-information" title="Link to this heading"></a></h2>
<p>For more information please visit <a class="reference external" href="https://www.agml.org/">the AgML website</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Wageningen University and Research.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>